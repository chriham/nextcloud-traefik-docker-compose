# Nextcloud Caddy Docker Compose Environment Variables
# Kopiere diese Datei zu .env und passe die Werte an deine Bedürfnisse an

# =============================================================================
# ALLGEMEINE KONFIGURATION
# =============================================================================

# Nextcloud Domain (ohne https://)
NEXTCLOUD_HOSTNAME=cloud.example.com
NEXTCLOUD_URL=https://cloud.example.com

# Let's Encrypt Email für Zertifikate
ACME_EMAIL=admin@example.com

# =============================================================================
# DATENBANK KONFIGURATION
# =============================================================================

# Datenbanktyp: "docker" für PostgreSQL in Docker, "external" für externe DB
DATABASE_TYPE=docker

# Für Docker PostgreSQL (wenn DATABASE_TYPE=docker)
DB_HOST=postgres
NEXTCLOUD_POSTGRES_IMAGE_TAG=postgres:16-alpine

# Für externe Datenbank (wenn DATABASE_TYPE=external)
# DB_HOST=192.168.1.100
# DB_PORT=5432

# Datenbank Credentials
NEXTCLOUD_DB_NAME=nextcloud
NEXTCLOUD_DB_USER=nextcloud
# Passwort wird in secrets/postgres_password.txt gespeichert

# =============================================================================
# NEXTCLOUD KONFIGURATION
# =============================================================================

# Docker Images
NEXTCLOUD_FPM_IMAGE_TAG=nextcloud:29-fpm-alpine
CADDY_IMAGE_TAG=caddy:2-alpine
NEXTCLOUD_REDIS_IMAGE_TAG=redis:7-alpine
NOTIFY_PUSH_IMAGE_TAG=nextcloud/notify_push:v0.6.9
IMAGINARY_IMAGE_TAG=nextcloud/aio-imaginary:latest

# Nextcloud Admin User
NEXTCLOUD_ADMIN_USERNAME=admin
# Passwort wird in secrets/nextcloud_admin_password.txt gespeichert

# Nextcloud Daten Verzeichnis auf dem Host
NEXTCLOUD_DATA_DIR=./nextcloud-data

# User/Group IDs (für File Permissions)
NEXTCLOUD_USER_ID=1000
NEXTCLOUD_GROUP_ID=1000
REDIS_USER_ID=1001
REDIS_GROUP_ID=1001

# Trusted Proxies (Caddy internal network)
TRUSTED_PROXIES=172.16.0.0/12

# Optional: Subpath für Nextcloud (leer lassen für Root-Installation)
# OVERWRITEWEBROOT=/nextcloud

# =============================================================================
# REDIS KONFIGURATION
# =============================================================================

# Redis Passwort wird in secrets/redis_password.txt gespeichert

# =============================================================================
# BACKUP KONFIGURATION
# =============================================================================

# Backup Pfade
DATA_PATH=/var/www/html/data
POSTGRES_BACKUPS_PATH=/backups/postgres
DATA_BACKUPS_PATH=/backups/data

# Backup Namen
POSTGRES_BACKUP_NAME=nextcloud-postgres-backup
DATA_BACKUP_NAME=nextcloud-data-backup

# Backup Einstellungen
BACKUP_INIT_SLEEP=30m
BACKUP_INTERVAL=1d
POSTGRES_BACKUP_PRUNE_DAYS=7
DATA_BACKUP_PRUNE_DAYS=7

# =============================================================================
# GPG VERSCHLÜSSELUNG
# =============================================================================

# GPG Verschlüsselung aktivieren (true/false)
BACKUP_GPG_ENCRYPTION=true

# GPG Empfänger (Komma-separierte Liste von Key-IDs oder Email-Adressen)
# Beispiel: "admin@example.com,backup@company.com,ABCD1234EFGH5678"
BACKUP_GPG_RECIPIENTS=""

# Welche Backup-Typen verschlüsseln (Komma-separiert)
# Optionen: database,secrets,data,config,volumes,logs
# "all" für alle Typen, "none" für keine Verschlüsselung
BACKUP_GPG_ENCRYPT_TYPES="database,secrets"

# GPG Keyring Pfad (optional, Standard: ~/.gnupg)
BACKUP_GPG_HOMEDIR=""

# GPG Kompression (0-9, 0=keine, 9=maximum)
BACKUP_GPG_COMPRESSION=6

# GPG Cipher Algorithm (optional)
# Optionen: AES256, AES192, AES, 3DES, etc.
BACKUP_GPG_CIPHER="AES256"

# =============================================================================
# ERWEITERTE EINSTELLUNGEN
# =============================================================================

# Nextcloud Environment File (zusätzliche Konfiguration)
NEXTCLOUD_ENV_FILE=./nextcloud.env

# HINWEIS: PHP-Einstellungen (Memory, Upload-Limits) sind in nextcloud.env konfiguriert
# HINWEIS: Caddy-Logging wird über Caddyfile konfiguriert, nicht über Environment Variables
