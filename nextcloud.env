# Nextcloud spezifische Environment Variablen
# Diese Datei wird in den Nextcloud FPM Container gemountet

# =============================================================================
# PHP KONFIGURATION
# =============================================================================

# Memory Limits
PHP_MEMORY_LIMIT=512M
PHP_UPLOAD_MAX_FILESIZE=10G
PHP_POST_MAX_SIZE=10G
PHP_MAX_EXECUTION_TIME=3600
PHP_MAX_INPUT_TIME=3600

# OPcache Settings
PHP_OPCACHE_ENABLE=1
PHP_OPCACHE_MEMORY_CONSUMPTION=128
PHP_OPCACHE_MAX_ACCELERATED_FILES=10000
PHP_OPCACHE_REVALIDATE_FREQ=1

# =============================================================================
# NEXTCLOUD SPEZIFISCHE KONFIGURATION
# =============================================================================

# Trusted Domains (wird automatisch aus NEXTCLOUD_HOSTNAME gesetzt)
# NEXTCLOUD_TRUSTED_DOMAINS wird aus der .env gelesen

# Default Phone Region
default_phone_region=DE

# =============================================================================
# REDIS KONFIGURATION
# =============================================================================

# Redis Session Locking
redis.session.locking_enabled=1
redis.session.lock_retries=3
redis.session.lock_wait_time=10000

# =============================================================================
# MAIL KONFIGURATION (Optional)
# =============================================================================

# SMTP Settings - uncomment and configure if needed
# mail_smtpmode=smtp
# mail_smtpsecure=tls
# mail_smtphost=smtp.example.com
# mail_smtpport=587
# mail_smtpauth=1
# mail_smtpname=noreply@example.com
# mail_smtppassword=your-smtp-password
# mail_from_address=noreply
# mail_domain=example.com

# =============================================================================
# SECURITY EINSTELLUNGEN
# =============================================================================

# Force HTTPS
# HINWEIS: Diese URL wird automatisch aus NEXTCLOUD_URL (.env) generiert
overwrite.cli.url=https://cloud.example.com
overwriteprotocol=https

# Session Timeout (in seconds)
session_lifetime=86400

# =============================================================================
# PERFORMANCE EINSTELLUNGEN
# =============================================================================

# Enable APCu
memcache.local=\OC\Memcache\APCu

# Enable Redis for distributed caching
memcache.distributed=\OC\Memcache\Redis
memcache.locking=\OC\Memcache\Redis

# File locking
filelocking.enabled=true

# =============================================================================
# LOGGING
# =============================================================================

# Log Level: 0=DEBUG, 1=INFO, 2=WARN, 3=ERROR, 4=FATAL
loglevel=2

# Log to file instead of syslog
log_type=file
logfile=/var/www/html/data/nextcloud.log

# Log rotation
log_rotate_size=104857600

# =============================================================================
# PREVIEW GENERATION
# =============================================================================

# Enable Imaginary for preview generation
preview_imaginary_url=http://imaginary:9000

# Preview providers
enabledPreviewProviders[]=OC\Preview\PNG
enabledPreviewProviders[]=OC\Preview\JPEG
enabledPreviewProviders[]=OC\Preview\GIF
enabledPreviewProviders[]=OC\Preview\BMP
enabledPreviewProviders[]=OC\Preview\XBitmap
enabledPreviewProviders[]=OC\Preview\MP3
enabledPreviewProviders[]=OC\Preview\MP4
enabledPreviewProviders[]=OC\Preview\TXT
enabledPreviewProviders[]=OC\Preview\MarkDown
enabledPreviewProviders[]=OC\Preview\PDF
enabledPreviewProviders[]=OC\Preview\MSOfficeDoc
enabledPreviewProviders[]=OC\Preview\MSOffice2003
enabledPreviewProviders[]=OC\Preview\MSOffice2007
enabledPreviewProviders[]=OC\Preview\OpenDocument
enabledPreviewProviders[]=OC\Preview\Photoshop

# Preview settings
preview_max_x=2048
preview_max_y=2048
preview_max_scale_factor=10

# =============================================================================
# APPS KONFIGURATION
# =============================================================================

# Default Apps
default_app=files

# App directories
apps_paths[0][path]=/var/www/html/apps
apps_paths[0][url]=/apps
apps_paths[0][writable]=false
apps_paths[1][path]=/var/www/html/custom_apps
apps_paths[1][url]=/custom_apps
apps_paths[1][writable]=true

# =============================================================================
# MAINTENANCE
# =============================================================================

# Maintenance window (UTC time)
maintenance_window_start=1
maintenance_window_end=5

# Update check
updater.release.channel=stable
has_internet_connection=true
check_for_working_wellknown_setup=true

# =============================================================================
# WEITERE EINSTELLUNGEN
# =============================================================================

# Enable user backend
user_backends[0][class]=OC_User_Database
user_backends[0][arguments][0]=

# Skeleton directory
skeletondirectory=

# Theme
theme=

# Default language
default_language=de

# Default locale
default_locale=de_DE

# Knowledgebase enabled
knowledgebaseenabled=false

# Allow user to change display name
allow_user_to_change_display_name=true
